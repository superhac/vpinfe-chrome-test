# .github/workflows/build.yml
name: Build Chromium App

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # 1. Checkout your repo
      - uses: actions/checkout@v3

      # 2. Set up Python
      - name: Set up Python 3.14
        uses: actions/setup-python@v4
        with:
          python-version: '3.14'

      # 3. Install Python dependencies
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install screeninfo pyinstaller

      # 4. Set up directories for Chromium
      - name: Create directories for Chromium
        run: mkdir -p chromium/linux chromium/windows chromium/mac

      # 5. Download Linux Chromium
      - name: Download Linux Chromium
        run: |
          wget -O chromium/linux/chrome.zip https://www.googleapis.com/download/storage/v1/b/chromium-browser-snapshots/o/Linux_x64/1582450/chrome-linux.zip
          unzip -q chromium/linux/chrome.zip -d chromium/linux

      # 6. Download Windows Chromium
      - name: Download Windows Chromium
        run: |
          wget -O chromium/windows/chrome.zip https://www.googleapis.com/download/storage/v1/b/chromium-browser-snapshots/o/Win_x64/999988/chrome-win.zip
          unzip -q chromium/windows/chrome.zip -d chromium/windows

      # 7. Download Mac Chromium
      - name: Download Mac Chromium
        run: |
          wget -O chromium/mac/chrome.zip https://www.googleapis.com/download/storage/v1/b/chromium-browser-snapshots/o/Mac/999994/chrome-mac.zip
          unzip -q chromium/mac/chrome.zip -d chromium/mac

      # 8. Build your app with PyInstaller (example)
      - name: Build with PyInstaller
        run: |
          pyinstaller --onefile your_main_script.py
